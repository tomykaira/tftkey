# Flick keyboard

This project is for typing Japanese sentences with one hand.
If you interested in English information, feel free to request in issues.

### 利用しているもの

美咲フォントを利用しています。とてもつかいやすいライセンスで提供してくださっていることに感謝します。

http://www.geocities.jp/littlimi/misaki.htm

Adafruit のいろいろ実装済みの TFT touch screen を利用しています。
組み立て図もライブラリの使い方もわかりやすく、すぐにプロトタイピングできました。

https://learn.adafruit.com/adafruit-2-dot-8-color-tft-touchscreen-breakout-v2

言わずとしれた、 Pro Micro を利用しています。激安なのにしっかり動く、クロックもそれなりに出るのでたくさん持っておくと重宝します。

### 組み立てガイド

https://learn.adafruit.com/adafruit-2-dot-8-color-tft-touchscreen-breakout-v2 の通りにブレッドボードなどで結線してください（雑）。

ちゃんとした Arduino をお持ちの方は https://www.adafruit.com/product/1651 が Arduino 用のピンを備えていてより簡単かもしれません。

Arduino を USB 接続して tftkey.ino をアップロードしてください。

### ソフトウェアの説明

上部分がプレビュー、下が5x4のキーパッドです。キーパッド上でフリック入力をします。センシングと HID キーボードとしての送信にはライブラリを使っています。ライブラリは ↑ にあげた adafruit のサイトから取得できます。

フリックは単に移動量で取ります。チャタるので数十サイクル離れてはじめたて離れたと認識させてます。文字は1文字バッファして装飾キー（濁点、半濁点、小文字）の操作を待てるようにしています。現在の構成だと視点移動が若干多めなので、数文字（確定されるまで？）画面上に残しておくのよさそうです。

キーマップはほぼ iOS です。Android でも大差ないと思います。

HID キーボードで、環境非依存で Unicode 文字を直接タイプインすることはできないので、日本語入力に媒介してもらっています。送信刷るキーシーケンスは Azik on Google IME 用になっているので、適宜キーマップをいじってくだい。

記号＋ひらがなを羅列したテーブルを持っていて、キーマップのテーブルをもっていて、パッド操作をキーマップのテーブルを使って字に置き換え、字を PC が処理できるキーシーケンスに置き換えて送信する仕組みです。バッファに入っている間は字をいじることができます。また複数字をまとめて入力するようなことがしたければ、バッファを複数文字持てるよう拡張することで達成できるでしょう。

### 拡張

- PC上での変換もこのデバイスから操作できるようにしたい。まずは矢印とシフト＋矢印に対応
- アルファベット、数字、記号の対応。特に記号はテーブルがかなり大きくなるので、プレビューやページングをつけてわかりやすく高速に入力したい
- より双方向な通信を実現するために、独自ドライバを利用したい
- 誤入力履歴をみて、誤入力が減るようにパッドのサイズなどを自動調整したい
